{% extends 'base.html.twig' %}

{% block title %}New AccessRight{% endblock %}

{% block javascripts %}
<script
    src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
    integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI="
    crossorigin="anonymous"
></script>
<script>
    $(document).ready(() => {
        const changeQueryString = (param, value) => {
            const newParams = new URLSearchParams(window.location.search);
            newParams.set(param, value);

            window.location.replace(
                window.location.pathname + '?' + newParams.toString()
            );
        }

        $("#access_right_owner_type").on('change', (e) => {
            if (e.target.value === '') {
                return window.location.replace(window.location.pathname);
            }

            return changeQueryString('owner_type', e.target.value);
        })

        $("#access_right_module").on('change', (e) => {
            if (e.target.value === '') {
                return window.location.replace(window.location.pathname);
            }

            return changeQueryString('module', e.target.value);
        })
    })
</script>
{% endblock %}

{% block body %}
    <h1>Create new AccessRight</h1>

    {{ include('access_right/_form.html.twig') }}

    <a href="{{ path('access_right_index') }}">back to list</a>
{% endblock %}
